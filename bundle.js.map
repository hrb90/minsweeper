{"version":3,"sources":["webpack:///webpack/bootstrap b153d57b49fcde7c9ab4","webpack:///./lib/board.js","webpack:///./lib/mjqga.js","webpack:///./lib/tile.js","webpack:///./lib/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACxHA,6BAA6B;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,8BAA8B,kBAAkB,EAAE;AAClD;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,IAAI;AACJ;;AAEA;AACA;AACA;AACA,WAAW;AACX,mDAAmD;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,QAAQ;AACR,MAAM;AACN;AACA;AACA,QAAQ;AACR,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;;AAEA;;AAEA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;;AAGA;AACA;;;;;;;AChPA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAoC,GAAG;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC1DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,CAAC","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b153d57b49fcde7c9ab4","const Tile = require(\"./tile\");\n\nclass Board {\n  constructor (rows, cols, numBombs) {\n    this._grid = Tile.makeGrid(rows, cols, numBombs);\n    this._populateCounts();\n  }\n\n  static deltas () {\n    return [[-1, -1],\n            [-1, 0],\n            [-1, 1],\n            [0, -1],\n            [0, 1],\n            [1, -1],\n            [1, 0],\n            [1, 1]];\n  }\n\n  revealBombs () {\n    this._flatGrid.forEach((tile) => {\n      if (tile.isBomb()) tile.reveal();\n    });\n  }\n\n  reveal (pos) {\n    let tile = this.getPos(pos);\n    tile.reveal();\n    if (tile.isEmpty()) {\n      let neighbors = this.neighbors(pos);\n      neighbors.forEach((neighbor) => {\n        if (!this.getPos(neighbor).revealed) this.reveal(neighbor);\n      });\n    } else if (tile.isBomb()) {\n      this.revealBombs();\n      return true;\n    }\n    return false;\n  }\n\n  flag (pos) {\n    this.getPos(pos).flag();\n  }\n\n  unflag (pos) {\n    this.getPos(pos).unflag();\n  }\n\n  _populateCounts () {\n    this._grid.forEach((row, rowIdx) => {\n      row.forEach((tile, colIdx) => {\n        if (!tile.isBomb()) {\n          tile.value = this._countBombNeighbors([rowIdx, colIdx]);\n        }\n      });\n    });\n  }\n\n  _countBombNeighbors (pos) {\n    let numBombNeighbors = 0;\n    let neighborTiles = this.neighbors(pos).map(this.getPos.bind(this));\n    neighborTiles.forEach((tile) => {\n      if (tile.isBomb()) numBombNeighbors++;\n    });\n    return numBombNeighbors;\n  }\n\n  isValid (pos) {\n    return (pos[0] >= 0 &&\n      pos[0] < this._grid.length &&\n      pos[1] >= 0 &&\n      pos[1] < this._grid[0].length);\n  }\n\n  render () {\n    this.publicGrid().forEach((row) => {\n      console.log(row.join(\"\"));\n    });\n  }\n\n  publicGrid () {\n    return this._grid.map((row) => {\n      return row.map((tile) => {\n        return tile.public();\n      });\n    });\n  }\n\n  isWon () {\n    let isWon = true;\n    this._flatGrid().forEach((tile) => {\n      if (!(tile.revealed || tile.isBomb())) isWon = false;\n    });\n    return isWon;\n  }\n\n  /* Returns a one-dimensional version of the grid for ease of iteration.\n  */\n  _flatGrid () {\n    let flattened = [];\n    this._grid.forEach((row) => {\n      flattened = flattened.concat(row);\n    });\n    return flattened;\n  }\n\n  neighbors (pos) {\n    let neighbors = [];\n    Board.deltas().forEach((delta) => {\n      let newPos = [pos[0] + delta[0], pos[1] + delta[1]];\n      if (this.isValid(newPos)) neighbors.push(newPos);\n    });\n    return neighbors;\n  }\n\n  getPos (pos) {\n    return this._grid[pos[0]][pos[1]];\n  }\n}\n\nmodule.exports = Board;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/board.js\n// module id = 0\n// module chunks = 0","/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tconst DomNodeCollection = __webpack_require__(1);\n\n\tlet readyQueue = [];\n\n\tdocument.addEventListener('DOMContentLoaded', function() {\n\t  readyQueue.forEach((f) => { f.call(document); });\n\t  readyQueue = [];\n\t});\n\n\twindow.$l = function(arg){\n\t  if (typeof arg === \"string\") {\n\t    let list = document.querySelectorAll(arg);\n\t    let listArray = [].slice.call(list);\n\t    return new DomNodeCollection(listArray);\n\t  } else if (arg instanceof HTMLElement) {\n\t    return new DomNodeCollection([arg]);\n\t  } else if (arg instanceof Function){\n\t    if (document.readyState === \"complete\") {\n\t      arg.call(document);\n\t    } else {\n\t      readyQueue.push(arg);\n\t    }\n\t  }\n\t};\n\n\t$l.extend = function(...objects) {\n\t  if (objects.length < 2) {\n\t    throw 'Too few objects';\n\t  }\n\t  let newObject = objects[0];\n\t  objects.slice(1).forEach(function(obj){\n\t    Object.keys(obj).forEach(function(key) {\n\t        newObject[key] = obj[key];\n\t    });\n\t  });\n\t};\n\n\t$l.ajax_defaults = {\n\t  url: \"\",\n\t  method: \"GET\",\n\t  data: {},\n\t  contentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\t  success: console.log,\n\t  error: console.log\n\t};\n\n\t$l.ajax = function(options) {\n\t  let finalOptions = {};\n\t  $l.extend(finalOptions, $l.ajax_defaults, options);\n\t  const xhr = new XMLHttpRequest();\n\t  xhr.open(finalOptions.method, finalOptions.url);\n\t  xhr.onload = function() {\n\t    if (xhr.status >= 200 && xhr.status < 300) {\n\t      finalOptions.success(JSON.parse(xhr.response));\n\t    } else {\n\t      finalOptions.error(JSON.parse(xhr.response));\n\t    }\n\t  };\n\t  xhr.setRequestHeader('Content-type', finalOptions.contentType);\n\t  xhr.send(finalOptions.data);\n\t};\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tclass DomNodeCollection {\n\t  constructor(els) {\n\t    this.els = els;\n\t    this.els.forEach((el) => {\n\t      el.listeners = [];\n\t    });\n\t  }\n\n\t  html (str) {\n\t    if (str === undefined) {\n\t      return this.els[0].innerHTML;\n\t    } else {\n\t      this.els.forEach((el) => {\n\t        el.innerHTML = str;\n\t      });\n\t    }\n\t  }\n\n\t  empty () {\n\t    this.html(\"\");\n\t  }\n\n\t  append (arg) {\n\t    if (arg instanceof DomNodeCollection) {\n\t      this.els.forEach((el) => {\n\t        arg.els.forEach((argEl) => {\n\t          el.innerHTML+= argEl.outerHTML;\n\t        });\n\t      });\n\t    } else if (arg instanceof HTMLElement) {\n\t      this.els.forEach((el) => {\n\t        el.innerHTML+= arg.outerHTML;\n\t      });\n\t    } else if (typeof arg === 'string') {\n\t      this.els.forEach((el) => {\n\t        el.innerHTML+= arg;\n\t      });\n\t    }\n\t  }\n\n\t  attr (attrName, attrVal) {\n\t    if (attrVal === undefined) {\n\t      return this.els[0].getAttribute(attrName);\n\t    } else {\n\t    this.els.forEach((el) => {\n\t      el.setAttribute(attrName, attrVal);\n\t    });\n\t   }\n\n\t  }\n\n\t  addClass (className) {\n\t    this.els.forEach((el) => {\n\t      el.classList.add(className);\n\t    });\n\t  }\n\n\t  removeClass (className) {\n\t    this.els.forEach((el) => {\n\t      el.classList.remove(className);\n\t    });\n\t  }\n\n\t  children () {\n\t    let childrenArray = [];\n\t    this.els.forEach((el) => {\n\t      let elsChildren = [].slice.call(el.children);\n\t      childrenArray = childrenArray.concat(elsChildren);\n\t    });\n\t    return new DomNodeCollection(childrenArray);\n\t  }\n\n\t  parent () {\n\t    return this.els.map((el) => el.parentElement);\n\t  }\n\n\t  find(selector) {\n\t    let matchingDescendants = [];\n\t    this.els.forEach((el) => {\n\t      let elsMatchingDescendants = [].slice.call(el.querySelectorAll(selector));\n\t      matchingDescendants = matchingDescendants.concat(elsMatchingDescendants);\n\n\t    });\n\t    return new DomNodeCollection(matchingDescendants);\n\t  }\n\n\t  remove(selector) {\n\t    if (selector === undefined) {\n\t      this.els.map(function(el) {\n\t        let parent = el.parentNode;\n\t        parent.removeChild(el);\n\t      });\n\t      this.els = [];\n\t    } else {\n\t      let selectedDescendants = this.find(selector);\n\t      let newEls = arrayDifference(this.els, selectedDescendants.els);\n\n\t      selectedDescendants.remove();\n\t      this.els = newEls;\n\t    }\n\t  }\n\n\t  on (eventType, callback) {\n\t    this.els.forEach((el) => {\n\t      el.addEventListener(eventType, callback);\n\t      el.listeners.push(callback);\n\t    });\n\t  }\n\n\t  off (eventType) {\n\t    this.els.forEach((el) => {\n\t      el.listeners.forEach((callback) => {\n\t        el.removeEventListener(eventType, callback);\n\t      });\n\t    });\n\t  }\n\t}\n\n\tfunction arrayDifference(arr1, arr2) {\n\t  return arr1.filter(function(el) {\n\t    return !arr2.includes(el);\n\t  });\n\t}\n\tmodule.exports = DomNodeCollection;\n\n\n/***/ }\n/******/ ]);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/mjqga.js\n// module id = 1\n// module chunks = 0","class Tile {\n  constructor(isBomb) {\n    this.value = isBomb ? \"b\" : undefined;\n    this.revealed = false;\n    this.flagged = false;\n  }\n\n  static makeGrid(rows, cols, numBombs) {\n    let bombArray = new Array(rows * cols);\n    bombArray.fill(false);\n    bombArray.fill(true, 0, numBombs);\n    function _shuffleBombs() {\n      for (let i = bombArray.length; i; i--) {\n        let j = Math.floor(Math.random() * i);\n        [bombArray[i - 1], bombArray[j]] = [bombArray[j], bombArray[i - 1]];\n      }\n    }\n    _shuffleBombs();\n    let grid = [];\n    for (let i = 0; i < rows; i++) {\n      let row = [];\n      for (let j = 0; j < cols; j++) {\n        row.push(new Tile(bombArray.pop()));\n      }\n      grid.push(row);\n    }\n    return grid;\n  }\n\n  reveal () {\n    this.unflag();\n    this.revealed = true;\n  }\n\n  flag () {\n    this.flagged = true;\n  }\n\n  unflag () {\n    this.flagged = false;\n  }\n\n  isEmpty() {\n    return (this.value === 0);\n  }\n\n  isBomb() {\n    return (this.value === \"b\");\n  }\n\n  public() {\n    if (this.flagged) return \"f\";\n    if (!this.revealed) return \"o\";\n    if (this.isBomb()) return \"b\";\n    return this.value;\n  }\n}\n\nmodule.exports = Tile;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/tile.js\n// module id = 2\n// module chunks = 0","const Board = require('./board');\nrequire('./mjqga');\n\nconst render = (boardEl, board) => {\n  boardEl.remove(\".tile\");\n  board.publicGrid().forEach((row, rowIdx) => {\n    row.forEach((tile, colIdx) => {\n      let tileEl = document.createElement(\"div\");\n      tileEl.classList.add(\"tile\");\n      tileEl.setAttribute(\"data-row\", rowIdx);\n      tileEl.setAttribute(\"data-col\", colIdx);\n      tileEl.innerHTML = tile;\n      boardEl.append(tileEl);\n    });\n  });\n  $l(\".tile\").on(\"click\", e => {\n    board.reveal([+(e.target.dataset.row), +(e.target.dataset.col)]);\n    render(boardEl, board);\n  });\n  $l(\".tile\").on(\"contextmenu\", e => {\n    e.preventDefault();\n    board.flag([+(e.target.dataset.row), +(e.target.dataset.col)]);\n    render(boardEl, board);\n    return false;\n  });\n};\n\n$l(function() {\n  let board = new Board(16, 16, 28);\n  let boardEl = $l(\"#board\");\n  render(boardEl, board);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/index.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}